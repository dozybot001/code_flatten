<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIchemy</title>
    <link rel="stylesheet" href="css/global.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div id="toast-overlay"></div>
    <nav class="app-header">
        <button id="action-switch-lang" class="ui-btn" data-i18n="buttons.switchLang"></button>
        <a href="https://github.com/dozybot001/AIchemy" class="ui-btn" data-i18n="labels.github"></a>
        <a href="https://dozybot001.github.io" class="ui-btn" data-i18n="labels.blog"></a>
        <button id="action-settings" class="ui-btn" title="API Settings">‚öôÔ∏è</button> 
    </nav>
    <div class="layout-section">
        <div class="hero-banner"><h1 data-i18n="labels.appName"></h1></div>
    </div>
    <div class="layout-section">
        <div class="app-workspace">
            <input type="file" id="input-upload-directory" class="hidden-input" webkitdirectory directory multiple>
            <input type="file" id="input-upload-files" class="hidden-input" multiple>
            <input type="file" id="input-upload-baseline" class="hidden-input" accept=".txt,text/plain">

            <div class="gemini-hero-container">
                <div class="gemini-input-wrapper">
                    <input type="text" id="input-req-command" class="gemini-main-input" autocomplete="off">
                    <button class="ui-btn" id="action-analyze-req">ÂàÜÊûê</button>
                </div>
            </div>
            
            <div class="ui-card" id="card-prompt-architect">
                <div class="ui-card__header">
                    <h2 data-i18n="labels.panelArchitect"></h2>
                    <div class="ui-toolbar">
                        <button class="ui-btn" id="action-gen-prompt">ÁîüÊàê</button>
                        <button class="ui-btn" id="action-copy-prompt">Â§çÂà∂</button>
                        <button class="ui-btn" id="action-reset-architect">üóëÔ∏è</button>
                    </div>
                </div>
                <div class="architect-container">
                    <div id="container-req-options" class="architect-options-area hidden"></div>
                    <div id="container-final-prompt" class="architect-result-area hidden">
                        <div class="divider-line mb-3"></div>
                        <textarea class="ui-editor-area auto-grow-textarea" id="output-architect-prompt" readonly></textarea>
                    </div>
                </div>
            </div>

            <div class="ui-card">
                <div class="ui-card__header">
                    <h2 data-i18n="labels.panelFiles"></h2>
                    <div class="ui-stat-group">
                        <span data-i18n="labels.statFiles"></span> <span class="ui-stat-value" id="display-file-count">0</span>
                        <span data-i18n="labels.statTokens"></span> <span class="ui-stat-value" id="display-token-estimator">0</span>
                    </div>
                    <div class="ui-toolbar">
                        <button class="ui-btn" id="action-import-dir" data-i18n="buttons.import"></button>
                        <button class="ui-btn" id="action-copy-structure" data-i18n="buttons.copyTree"></button>
                        <button class="ui-btn" id="action-append-files" data-i18n="buttons.append"></button>
                        <button class="ui-btn" id="action-select-all" data-i18n="buttons.selectAll"></button>
                        <button class="ui-btn" id="action-merge-content" data-i18n="buttons.merge"></button> 
                        <button class="ui-btn" id="action-reset-workspace" data-i18n="buttons.clearWorkspace"></button>
                    </div>
                </div>
                <textarea class="ui-editor-area" id="viewer-file-tree"></textarea>
            </div>

            <div class="ui-card">
                <div class="ui-card__header">
                    <h2 data-i18n="labels.panelPreview"></h2>
                    <div class="ui-toolbar">
                        <button class="ui-btn" id="action-copy-result" data-i18n="buttons.copy"></button>
                        <button class="ui-btn" id="action-download-text" data-i18n="buttons.download"></button>
                        <button class="ui-btn" id="action-clear-result" data-i18n="buttons.clear"></button>
                    </div>
                </div>
                <textarea class="ui-editor-area" id="editor-merge-result" readonly></textarea>
            </div>

            <div class="ui-card">
                <div class="ui-card__header">
                    <h2 data-i18n="labels.panelPatch"></h2>
                    <div class="ui-stat-group">
                        <span data-i18n="labels.statBaseline"></span> <span class="ui-stat-value" id="display-baseline-name" data-i18n="labels.baselineName"></span>
                    </div>
                    <div class="ui-toolbar">
                        <button class="ui-btn" id="action-upload-baseline" data-i18n="buttons.uploadBaseline"></button>
                        <button class="ui-btn" id="action-preview-patch" data-i18n="buttons.previewPatch"></button>
                        <button class="ui-btn" id="action-clear-patch" data-i18n="buttons.clear"></button>
                    </div>
                </div>
                <textarea class="ui-editor-area" id="input-patch-source"></textarea>
            </div>
            
            <div class="ui-card">
                <div class="ui-card__header">
                    <h2 data-i18n="labels.panelDiff"></h2>
                    <div class="ui-toolbar">
                        <button class="ui-btn" id="action-apply-download" data-i18n="buttons.applyDownload"></button>
                        <button class="ui-btn" id="action-apply-copy" data-i18n="buttons.applyCopy"></button>
                        <button class="ui-btn" id="action-clear-diff" data-i18n="buttons.clear"></button>
                    </div>
                </div>
                <div class="ui-editor-area diff-content-view" id="viewer-diff-result"></div>
            </div>

            <div class="ui-card">
                <div class="ui-card__header">
                    <h2 data-i18n="labels.panelRestore"></h2>
                    <div class="ui-toolbar">
                        <button class="ui-btn" id="action-export-zip" data-i18n="buttons.packDownload"></button> 
                        <button class="ui-btn" id="btnClearRestore" data-i18n="buttons.clear"></button>
                    </div>
                </div>
                <textarea class="ui-editor-area" id="input-restore-source"></textarea>
            </div>
        </div>
    </div>

    <div id="modal-settings" class="modal-overlay hidden">
        <div class="ui-card modal-content">
            <div class="ui-card__header">
                <h2>‚öôÔ∏è ÈÖçÁΩÆ</h2>
                <button class="ui-btn" id="action-close-settings">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>API Base URL</label>
                    <input type="text" id="setting-base-url" class="ui-input" placeholder="https://api.openai.com/v1">
                </div>
                <div class="form-group">
                    <label>API Key</label>
                    <input type="password" id="setting-api-key" class="ui-input">
                </div>
                <div class="form-group">
                    <label>Model</label>
                    <input type="text" id="setting-model" class="ui-input" placeholder="gpt-4o">
                </div>
            </div>
            <div class="modal-footer">
                <button class="ui-btn" id="action-save-settings">‰øùÂ≠ò</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/diff_match_patch/20121119/diff_match_patch.js"></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/core.js"></script>
    <script src="js/app.js"></script>
</body>
</html>